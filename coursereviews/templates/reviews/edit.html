{% extends "reviews/base.html" %}

{% block content %}
  <h2>Write a review</h2>
  {% if form.errors %}
  <div style="color: #b94a48">Oops, looks like you missed a field or two</div>
  {% endif %}
  <a class="btn btn-link" href="/">Back to search</a>
  <form role="form" method="POST">
    <div class="prof_course-container{% if form.prof_course.errors %} error{% endif %}">
      <h4><label for="id_prof_course">Pick a course</label></h4>
      <div class="row">
        <div class="col-lg-4 col-md-4">
          <input type="hidden" name="prof_course" id="id_prof_course" data-placeholder="Dropdown to search" {% if form.prof_course.value %}value="{{ form.prof_course.value }}"{% endif %}>
          <script type="text/javascript" id="prof_course_choices">
          [
            {% for option in form.prof_course.field.choices.queryset %}
              {% templatetag openbrace %}"id": {{ forloop.counter }}, "text": "{{ option }}"{% templatetag closebrace %}{% if not forloop.last %},{% endif %}
            {% endfor %}
          ]
          </script>
        </div>
      </div>
    </div>
    <div class="value-container{% if form.value.errors %} error{% endif %}">
      <h4><label for="id_value">How valuable was the course and its concepts to overall education?</label></h4>
      <div class="row">
        <div class="btn-group col-lg-4 col-md-4" data-toggle="buttons">
          {% for value, text in form.value.field.choices %}
            {% if text != "---------" %}
            <label class="btn btn-default{% if form.value.value == value %} active{% endif %}">
              <input type="radio" name="value" value="{{ value }}">{{ text }}
            </label>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="find-container{% if form.find.errors %} error{% endif %}">
      <h4><label for="id_find">How did you find the material presented?</label></h4>
      <div class="row">
        <div class="btn-group col-lg-4 col-md-4" data-toggle="buttons">
          {% for value, text in form.find.field.choices %}
            {% if text != "---------" %}
            <label class="btn btn-default{% if form.find.value == value %} active{% endif %}">
              <input type="radio" name="find" value="{{ value }}">{{ text }}
            </label>
            {% endif %}
          {% endfor %}
          </select>
        </div>
      </div>
    </div>
    <div class="atmosphere-container{% if form.atmosphere.errors %} error{% endif %}">
      <h4><label for="id_atmosphere">How was the overall class atmposphere?</label></h4>
      <div class="row">
        <div class="btn-group col-lg-4 col-md-4" data-toggle="buttons">
          {% for value, text in form.atmosphere.field.choices %}
            {% if text != "---------" %}
            <label class="btn btn-default{% if form.atmosphere.value == value %} active{% endif %}">
              <input type="radio" name="atmosphere" value="{{ value }}">{{ text }}
            </label>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="hours-container{% if form.hours.errors %} error{% endif %}">
      <h4><label for="id_hours">How many hours per week did you spend preparing for the class?</label></h4>
      <div class="row">
        <div class="col-lg-4 col-md-4">
          <div class="hours-display well well-sm">{{ form.hours.value }}</div>
          <input type="text" class="form-control hide" name="hours" value="{{ form.hours.value }}" id="id_hours" data-slider-value="{{ form.hours.value }}">
        </div>
      </div>
    </div>
    <div class="deserving-container{% if form.deserving.errors %} has-error{% endif %}">
      <h4><label for="id_deserving">How were your grades in relation to your effort?</label></h4>
      <div class="row">
        <div class="btn-group col-lg-4 col-md-4" data-toggle="buttons">
          {% for value, text in form.deserving.field.choices %}
            {% if text != "---------" %}
            <label class="btn btn-default{% if form.deserving.value == value %} active{% endif %}">
              <input type="radio" name="deserving" value="{{ value }}">{{ text }}
            </label>
            {% endif %}
          {% endfor %}
          </select>
        </div>
      </div>
    </div>
    <div class="help-container{% if form.help.errors %} error{% endif %}">
      <h4><label for="id_help">Were professors or assistants available to help?</label></h4>
      <div class="row">
        <div class="btn-group col-lg-4 col-md-4" data-toggle="buttons">
          {% for value, text in form.help.field.choices %}
            {% if text != "---------" %}
            <label class="btn btn-default{% if form.help.value == value %} active{% endif %}">
              <input type="radio" name="help" value="{{ value }}">{{ text }}
            </label>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="another-container{% if form.another.errors %} error{% endif %}">
      <h4><label for="id_another">Would you take another class with this professor?</label></h4>
      <div class="row">
        <div class="btn-group col-lg-4 col-md-4" data-toggle="buttons">
          {% for value, text in form.another.field.choices %}
            {% if text != "---------" %}
            <label class="btn btn-default{% if form.another.value == value %} active{% endif %}">
              <input type="radio" name="another" value="{{ value }}">{{ text }}
            </label>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="recommend-container{% if form.recommend.errors %} error{% endif %}">
      <h4><label for="id_recommend">Would you recommend this class to a friend?</label></h4>
      <div class="row">
        <div class="btn-group col-lg-4 col-md-4" data-toggle="buttons">
          {% for value, text in form.recommend.field.choices %}
            {% if text != "---------" %}
            <label class="btn btn-default{% if form.recommend.value == value %} active{% endif %}">
              <input type="radio" name="recommend" value="{{ value }}">{{ text }}
            </label>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
    <h4><label for="id_comment">Additional comments:</label></h4>
    <div class="row">
      <div class="col-lg-6 col-md-6">
        <textarea id="id_comment" name="comment" class="form-control" rows="7">{% if form.comment.value %}{{ form.comment.value }}{% endif %}</textarea>
      </div>
    </div>
    {% csrf_token %}
    <input type="submit" value="Save Review" class="btn btn-primary">
    {% if form.instance.id %}
      <a class="btn btn-link review-delete" href="{% url 'delete_review' form.instance.id %}">Delete this review</a>
    {% endif %}
  </form>

  <script type="text/javascript">
    var sliderInitVal = {{ form.hours.value }}
  </script>
{% endblock %}